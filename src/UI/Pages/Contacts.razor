@page "/contacts"

<PageTitle>Report an Issue</PageTitle>

<div class="page-container">
    <section class="header-section">
        <h2>Report an Issue</h2>
        <div class="description">
            Please provide details about the issue you are experiencing. Your feedback is important to us.
        </div>
    </section>

    <section class="content-section">
        <div class="form-container"
             style="flex: 1 1 100%; max-width: 600px; margin: 0 auto;"> @* Adjusted style for single column *@
            <div class="form-card">
                <h3>Submit a Report</h3>
                <EditForm Model="ReportModel" OnValidSubmit="HandleSendReportAsync">
                    <DataAnnotationsValidator/>
                    <div class="form-fields">
                        <div class="form-group">
                            <label for="title">Title</label>
                            <InputText id="title" class="form-control" @bind-Value="ReportModel.Title"
                                       placeholder="Brief title of the issue"/>
                            <ValidationMessage For="@(() => ReportModel.Title)"/>
                        </div>
                        <div class="form-group">
                            <label for="description">Description</label>
                            <InputTextArea id="description" class="form-control" rows="4"
                                           @bind-Value="ReportModel.Description"
                                           placeholder="Detailed description of the issue"/>
                            <ValidationMessage For="@(() => ReportModel.Description)"/>
                        </div>
                        <div class="form-group">
                            <label for="attachments">Attachments (Optional)</label>
                            <InputFile id="attachments" class="form-control" OnChange="LoadFiles" multiple/>
                            @if (SelectedFiles.Any())
                            {
                                <ul style="list-style-type: none; padding-left: 0; margin-top: 0.5rem;">
                                    @foreach (IBrowserFile file in SelectedFiles)
                                    {
                                        <li style="font-size: 0.9rem; color: #4A5568;">@file.Name (@FormatBytes(file.Size))</li>
                                    }
                                </ul>
                            }
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="form-control" disabled="@IsSubmitting">
                            @if (IsSubmitting)
                            {
                                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                                <text> Sending...</text>
                            }
                            else
                            {
                                <text>Send Report</text>
                            }
                        </button>
                    </div>
                </EditForm>
            </div>
        </div>
    </section>
</div>