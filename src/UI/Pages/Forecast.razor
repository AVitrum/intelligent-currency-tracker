@page "/forecast"

<div class="page-container">
    <div class="header-section">
        <h2>Currency Forecast</h2>
        <p class="description">
            Select a currency and forecast period to generate a rate forecast using our AI model.
            The forecast will update automatically upon selection.
        </p>
    </div>

    <div class="content-section">
        <div class="form-container">
            <div class="form-card">
                <div class="form-group">
                    <label for="currencySelect">Select Currency:</label>
                    @if (_currencyCodes.Any())
                    {
                        <select id="currencySelect" class="form-control" @bind="SelectedCurrencyCode">
                            @foreach (string currencyCode in _currencyCodes)
                            {
                                <option value="@currencyCode">@currencyCode</option>
                            }
                        </select>
                    }
                    else if (_isLoading)
                    {
                        <p>Loading currencies...</p>
                    }
                    else
                    {
                        <p>No currencies available.</p>
                    }
                </div>
                <div class="form-group">
                    <label for="forecastPeriodsSelect">Forecast Period (Days):</label>
                    <select id="forecastPeriodsSelect" class="form-control" @bind="ForecastPeriods">
                        <option value="7">7 Days</option>
                        <option value="14">14 Days</option>
                        <option value="30">30 Days</option>
                    </select>
                </div>
                @if (_isLoading && _currencyCodes.Any())
                {
                    <div class="form-group" style="text-align: center;">
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        <span> Generating Forecast...</span>
                    </div>
                }
            </div>
        </div>

        <div class="chart-section">
            @if (_forecastData.Any())
            {
                <div class="forecast-warning">
                    <strong>Disclaimer:</strong> The forecast data presented is generated by an AI model and should be
                    considered an estimate.
                    This chart illustrates potential trends and is not a guarantee of future currency rates.
                    Please use this information cautiously and do not rely on it solely for financial decisions.
                </div>
            }

            @if (_isLoading && !_forecastData.Any() && _currencyCodes.Any())
            {
                <p>Loading forecast data...</p>
            }
            else if (!_forecastData.Any() && !_isLoading)
            {
                <p>No forecast data to display. Select a currency and period to generate a forecast.</p>
            }

            <div class="chart-container">
                <canvas id="currencyChart"></canvas>
                <div id="chartTooltip" class="chart-tooltip"></div>
            </div>
            <div class="chart-footer">
                Forecast Chart
            </div>
        </div>
    </div>
</div>